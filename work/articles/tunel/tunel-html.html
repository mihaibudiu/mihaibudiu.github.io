<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//RO">

<!--Converted with LaTeX2HTML 2K.1beta (1.47)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Tuneluri (tunneling)</TITLE>
<META NAME="description" CONTENT="Tuneluri (tunneling)">
<META NAME="keywords" CONTENT="tunel-html">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-2">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="../articles.css">

</HEAD>

<BODY >

<P>

<P>
<H1 ALIGN="CENTER">Tuneluri (tunneling)</H1> <P
ALIGN="CENTER"><STRONG>Mihai Budiu -- <TT>mihaib+@cs.cmu.edu</TT>
<BR><TT><a
href="http://www.cs.cmu.edu/~mihaib">http://www.cs.cmu.edu/~mihaib</a></TT></STRONG></P>
<P ALIGN="CENTER"><STRONG>11 martie 1999</STRONG></P>

<P>
<DL>
<DT><STRONG>Subiect:</STRONG></DT>
<DD>conceptul de tunel ºi aplicaþiile lui
</DD>
<DT><STRONG>Cunoºtinþe necesare:</STRONG></DT>
<DD>cunoºtinþe elementare despre
funcþionarea reþelelor de calculatoare
</DD>
<DT><STRONG>Cuvinte cheie:</STRONG></DT>
<DD>protocol, ruter, tunel, TCP/IP, firewall, reþea
privatã virtualã, mbone, difuzare, mobile-IP
</DD>
</DL>

<P>
<BR>

<H2><A NAME="SECTION00010000000000000000">
Contents</A>
</H2>
<!--Table of Contents-->

<UL>
<LI><A NAME="tex2html18"
  HREF="tunel-html.html">Internetul: o reþea paradoxalã</A>
<UL>
<LI><A NAME="tex2html19"
  HREF="#SECTION00021000000000000000">Serviciul oferit de Internet</A>
<LI><A NAME="tex2html20"
  HREF="#SECTION00022000000000000000">Protocolul de transport</A>
</UL>
<BR>
<LI><A NAME="tex2html21"
  HREF="#SECTION00030000000000000000">Conceptul de tunel</A>
<LI><A NAME="tex2html22"
  HREF="#SECTION00040000000000000000">Aplicaþii</A>
<UL>
<LI><A NAME="tex2html23"
  HREF="#SECTION00041000000000000000">Subreþele speciale</A>
<LI><A NAME="tex2html24"
  HREF="#SECTION00042000000000000000">Reþele private virtuale</A>
<LI><A NAME="tex2html25"
  HREF="#SECTION00043000000000000000">MBONE: reþeaua de difuzare</A>
<LI><A NAME="tex2html26"
  HREF="#SECTION00044000000000000000">Mobile-IP: calculatoare mobile</A>
</UL>
<BR>
<LI><A NAME="tex2html27"
  HREF="#SECTION00050000000000000000">Concluzii</A>
</UL>
<!--End of Table of Contents-->
<P>

<H1><A NAME="SECTION00020000000000000000">
Internetul: o reþea paradoxalã</A>
</H1>

<P>
În urmã cu cîteva luni am avut privilegiul de a asista la o
prelegere deosebit de interesantã despre evoluþia Internetului.
Vorbitorul era un ``guru'', unul dintre cei care au contribuit în mod
esenþial la crearea ºi dezvoltarea acestei ultime revoluþii
tehnologice: David Clark, cercetãtor la Massachussets Institute of
Technology, cea mai prestigioasã universitate tehnicã din Statele
Unite, ºi probabil ºi din lume.

<P>
David Clark a primit doctoratul tot la MIT in 1973.  Dupã primirea
doctoratului a lucrat în dezvoltarea reþelei militare ARPANET, care
va deveni mai tîrziu Internetul.  Dl. Clark a fost unul dintre
proiectanþii reþelelor token-ring, despre care am vorbit pe scurt
într-un articol anterior.  De la mijlocul anilor 1970 Dl. Clark a
lucrat la dezvoltarea Internetului.  Intre 1981 ºi 1989 a fost
arhitectul ºet al dezvoltãrii de protocoale pentru Internet.
Dl. Clark a fost ºi unul dintre proiectanþii sistemului de operare
Multics, dupã care s-au inspirat cei care au creat sistemul de
operare Unix.  Cercetarea sa curentã este în domeniul protocoalelor
ºi arhitecturilor pentru reþele de date de foarte mare vitezã; în
speþã extinderea Internetului pentru a suporta trafic de timp real,
alocarea de resurse ºi tarifare.

<P>
Expunerea domnului Clark despre Internet a fost extrem de
concentratã; aºa cum numai un individ cu o experienþã uriaºã
acumulatã poate sã o facã, Clark a desluºit trãsãturile
esenþiale ale reþelei, reuºind sã facã, aºa cum a spus chiar
dumnealui, o ``introducere în Internet în 15 minute'' (restul
expunerii a fost consacrat discuþiilor despre evoluþia ulterioarã a
reþelei).  Voi încerca sã prezint în introducerea acestui text
unele dintre ideile domnului Clark.  Voi reproduce din memorie spusele
dînsului; sper sã nu fiu o sursã prea mare de distorsiuni.  Despre
Internet ºi istoricul sãu am mai scris ºi cu alte prilejuri în PC
Report, iar copiile articolelor cu pricina sunt disponibile din pagina
mea de web; nu o sã mã repet aici.

<P>
<BLOCKQUOTE>
Pe la începutul anilor '70, în timp ce lucram la construirea
Internetului -- spunea David Clark -- am discutat cu un inginer de
la AT&amp;T<A NAME="tex2html1"
  HREF="#foot52"><SUP>1</SUP></A>.  Insul mi-a
împãrtãºit la un pahar impresia lui despre strãdania noastrã:
``eu cred cã sunteþi þicniþi; o reþea de felul ãsta nu poate sã
funcþioneze.''

</BLOCKQUOTE>

<P>
Din punctul de vedere al unei companii de telefoane, într-adevãr,
Internetul este o reþea complet paradoxalã; totul este cu susul în
jos, cu totul altfel decît în reþeaua de telefonie.

<P>
De exemplu, în reþeaua telefonicã toatã ``inteligenþa'' se aflã
în interiorul reþelei: centralele telefonice, releele, centralele
interurbane, sunt mecanisme extraordinar de complicate, care
controleazã fiecare detaliu al funcþionãrii reþelei: gestiunea
apelurilor, formarea circuitelor între sursã ºi destinaþie,
rezervarea de resurse (circuite) în toate centralele, semnalizarea,
multiplexarea convorbirilor pe trunchiurile dintre centrale, controlul
accesului la reþea (semnalizat prin tonul de ocupat), tarifarea,
etc., sunt toate fãcute în interiorul reþelei.  Prin comparaþie,
telefoanele, de la capãtul sîrmei, sunt niºte dispozitive complet
inepte, incapabile de altceva decît de a codifica ºi decodifica
vocea, ºi de o semnalizare primitivã (ex. sonerie, ton de ocupat,
etc.).

<P>
Dimpotrivã, în Internet miezul reþelei este practic tembel, ºi
oferã un serviciu aproape inexistent nodurilor externe; prin contrast
toatã inteligenþa se aflã în entitãþile de la extremitãþi
(calculatoarele), care comunicã între ele.  Internetul nu interzice
nimãnui accesul, nu rezervã nici un fel de resurse pentru nimeni, nu
tarifeazã nimic, ºi în general, nu oferã nici un fel de garanþii.

<P>

<UL>
<LI>O companie de genul AT&amp;T garanteazã fiecãrui utilizator cã
nu va avea de a face decît într-o proporþie minusculã cu refuzul
accesului la reþea (adicã ton de ocupat) din lipsa de circuite din
centrale; Internetul nu promite nimic; 

<P>
</LI>
<LI>AT&amp;T garanteazã cã, o datã stabilitã o conexiune între doi
convorbitori ea nu va fi desfãcutã decît cînd unul dintre ei
închide; Internetul nu oferã nici un fel de garanþie cu privire la
cîte dintre datele transmise vor ajunge la celãlalt capãt;

<P>
</LI>
<LI>AT&amp;T garanteazã securitatea convorbirilor telefonice, pe cînd
în Internet e posibil ca sute de urechi sã intercepteze ºi modifice
datele care circulã;

<P>
</LI>
<LI>AT&amp;T garanteazã cã dupã un anumit numãr de milisecunde
fiecare apel telefonic este fie conectat fie oferã ton de ocupat; în
Internet timpul de stabilire a unei conexiuni este nelimitat;

<P>
</LI>
<LI>AT&amp;T promite cã tot ce unul dintre vorbitori pronunþã în
microfon ajunge la capãtul celãlalt; în Internet un bit sau un
megaoctet din datele pe care le trimiteþi pot dispãrea pentru
totdeauna;

<P>
</LI>
<LI>AT&amp;T promite cã (în mãsura în care viteza luminii permite),
cei doi vorbitori vor purta o conversaþie interactivã, în care
spusele unuia ajung cît se poate de repede la celãlalt; în Internet
ceea ce trimiteþi astãzi poate apãrea undeva, în altã parte,
teoretic chiar ºi peste zile întregi;

<P>
</LI>
<LI>AT&amp;T înregistreazã ºi tarifeazã fiecare secundã de
convorbire telefonicã în funcþie de plasamentul celor care
converseazã, ora convorbirii, abonamentul plãtit, tarife speciale,
etc.; în Internet nu existã nici un fel de contabilizare a cine cu
cine, cînd, cît ºi pe unde comunicã;

<P>
</LI>
<LI>AT&amp;T este o corporaþie unicã, care administreazã întreaga
reþea pe care o are în posesiune ºi controleazã fiecare aspect al
funcþionãrii ei; Internetul este o federaþie de reþele de
dimensiuni foarte diferite, din toate þãrile globului, administratã
de indivizi pricepuþi ºi nepricepuþi, fiecare dupã cum îl þin
puterile;

<P>
</LI>
<LI>AT&amp;T face cu alte companii telefonice contracte prin care-ºi
interconecteazã reþelele, stipulînd fiecare detaliu de
responsabilitate a pãrþilor; în Internet datele oricui pot traversa
practic orice parte a reþelei, fãrã ca trimiþãtorul, destinatarul
sau cei care posedã acele pãrþi ale reþelei sã afle vreodatã;

<P>
</LI>
<LI>Telefonia mondialã se sprijinã pe un set relativ mic de
standarde, care indicã exact fiecare amãnunt, de la mufele pe care
le pot avea cablurile, pînã la felul în care se transmite fiecare
bit de informaþie; Internetul leagã laolaltã zeci de feluri de
reþele diferite, ºi poate acomoda fãrã nici un fel de efort
tehnologii de care nu a auzit nimeni în momentul în care a fost
proiectat.
</LI>
</UL>

<P>

<H2><A NAME="SECTION00021000000000000000">
Serviciul oferit de Internet</A>
</H2>

<P>
Dacã studiem cu atenþie unicul serviciu oferit de Internet o sã
observãm cã el sunã cam aºa: ``utilizatorul dã niºte date
reþelei, cu indicaþia de a le trimite undeva.  Reþeaua ar putea sã
transporte unele dintre date, la un moment dat, pînã la capãtul
celãlalt.''

<P>
Dacã vi se pare o exagerare, studiaþi din nou specificaþiile
protocolului numit IP, (Internet Protocol), care este executat de
toate calculatoarele din interiorul reþelei (numite rutere), ºi o
sã observaþi cã nu puteþi descrie deloc mai precis
funcþionalitatea acestuia.

<P>
Acesta este paradoxul Internetului: o construcþie atît de
fenomenalã (cum poate mãrturisi oricine a folosit serviciile sale,
de e-mail, ftp, web, telnet, telefonie, jocuri, ºi atîtea altele)
este înãlþatã pe un eºafodaj atît de ``ºubred'' ca IP.

<P>
Cînd inginerul de la AT&amp;T l-a întrebat pe David Clark: ``noi am
proiectat reþeaua de telefoane pentru convorbiri telefonice, ºi am
optimizat-o la maximum pentru asta; Internetul vostru pentru ce e
bun?'', David Clark i-a rãspuns: ``nu am nici cea mai micã idee la
ce e bun Internetul; noi am optimizat Internetul pentru...
schimbare.  Internetul trebuie sã acomodeze orice fel de aplicaþie
ne-ar trece prin minte, ºi ca atare trebuie sã fie extrem de
flexibil''.

<P>
În retrospectivã putem spune cã proiectarea Internetului a fost un
succes ingineresc fenomenal; majoritatea aplicaþiilor care se
folosesc de Internet astãzi nici nu puteau fi imaginate în urmã cu
douãzeci de ani, ºi suntem abia la început, credeþi-mã.

<P>

<H2><A NAME="SECTION00022000000000000000">
Protocolul de transport</A>
</H2>

<P>
Una dintre cheile funcþionãrii unui sistem atît de ``fragil'' este
protocolul TCP, Transport Control Protocol.  Dacã douã calculatoare
converseazã între ele prin Internet, numai ele douã folosesc TCP,
ºi nu ºi toate nodurile aflate pe traseul dintre ele.  TCP reparã
toate slãbiciunile protocolului IP, transformînd Internetul într-un
mediu predictibil ºi fiabil.  Dacã reþeaua dintre calculatoare
funcþioneazã cîtuºi de puþin, în sensul cã livreazã ceva din
datele care i se dau, TCP îºi face treaba:

<P>

<UL>
<LI>TCP garanteazã cã datele trimise de un capãt ajung în partea
cealaltã în exact aceeaºi ordine în care au fost trimise,
indiferent de comportarea reþelei;

<P>
</LI>
<LI>TCP garanteazã cã datele trimise ajung exact o datã;

<P>
</LI>
<LI>TCP garanteazã ºi cã datele din conversaþii diferite (ale
altor calculatoare, sau ale aceloraºi douã calculatoare din trecut)
nu sunt niciodatã amestecate;

<P>
</LI>
<LI>TCP garanteazã cã reþeaua <EM>nu se congestioneazã</EM>; acesta
este poate cel mai paradoxal aspect al funcþionãrii Internetului:
dacã telefoanele ar funcþiona în acest fel, e ca ºi cum telefonul
dumneavoastrã de acasã are grijã de toate centralele telefonice
urbane, interurbane ºi internaþionale prin care trece convorbirea
dumneavoastrã!  Dacã TCP nu ar face acest lucru, reþeaua nu ar
funcþiona de loc.  Nodurile terminale ale reþelei au grijã de o
entitate extrem de complexã, despre care de fapt nici nu ºtiu mare
lucru (nu e de mirare ca tehnicianul de la AT&amp;T nu înþelegea cum se
poate aºa ceva).  TCP face treaba asta însã fãrã a ºti mare
lucru despre cum aratã reþeaua; despre asta însã vom vorbi altã
datã.
</LI>
</UL>

<P>
Mã voi opri aici din rememorarea conferinþei domnului Clark, pentru
a ataca subiectul de fond al acestui articol.  ªi anume voi ilustra
cum pe baza protocolului IP au fost construite alte servicii
sofisticate, care dau reþelei înfãþiºãri foarte diferite.

<P>

<H1><A NAME="SECTION00030000000000000000">
Conceptul de tunel</A>
</H1>

<P>
Conceptul central al acestui articol este <EM>tunelul</EM>.  Este un
concept deosebit de simplu, dar cu aplicaþii uluitoare.  Voi ilustra
noþiunea printr-o analogie.

<P>
Într-un articol anterior, despre rutarea din Internet, comparam
transmisiunea datelor prin Internet cu funcþionarea sistemului
poºtal; analogia este destul de precisã, ºi o voi refolosi ºi
aici.  

<P>
Calculatoarele care comunicã sunt doi cetãþeni, iar Internetul este
sistemul poºtal.  Unitatea de transmisiune este scrisoarea (pachetul
de date).  Un ins pune scrisoarea la poºta, iar apoi o armatã de
poºtaºi, ºoferi, aviatori, hamali, etc. mutã scrisoarea la
destinatar.  Scrisorile se pierd uneori, iar poºta nu garanteazã cã
ele vor ajunge la destinaþie; la fel se petrec lucrurile ºi în
Internet.

<P>
Sã ne imaginãm acum cã avem de a face cu o þarã care nu vrea sã
adere la convenþiile poºtale internaþionale, care nu recunoaºte
timbrele, care trimite scrisorile în pungi în loc de plicuri ºi la
care plata se face direct funcþionarilor.  Sã ne mai imaginãm cã,
din anumite motive, scrisorile noastre trebuie sã traverseze aceastã
þarã bizarã (ºi nu avem un avion la dispoziþie).  Ce ne facem?

<P>
Sistemul poºtal internaþional ar putea crea în acest scop o
organizaþie specialã, cu filiale la douã graniþe ale acestei
þãri.  Atunci cînd un plic trebuie sã traverseze aceastã þarã,
acesta este livrat la graniþã, este bãgat într-o pungã ºi plata
este fãcutã unui funcþionar, cu rugãmintea de a trimite punga la
cealaltã graniþã.  Cînd punga ajunge dincolo, cealaltã filialã
extrage din pungã plicul, dupã care îl re-insereazã în circuitul
poºtal normal.  Traseul poºtal între cele douã filiale se numeºte
în terminologia Internetului ``un tunel''.  Numele este destul de
natural, pentru cã obiectul de transportat (plicul) intrã într-o
zonã întunecoasã (punga) ºi iese abia la capãtul celãlalt la
luminã, netulburat.

<P>
În general, avem de a face cu un tunel cînd datele (plicurile)
trimise cu un anumit protocol sunt ``împachetate'' folosind un alt
protocol de transmisiune (pungile), ºi sunt despachetate apoi la
celãlalt capãt.  Împachetarea pachetelor se mai numeºte <EM>încapsulare</EM>.

<P>

<H1><A NAME="SECTION00040000000000000000">
Aplicaþii</A>
</H1>

<P>

<H2><A NAME="SECTION00041000000000000000">
Subreþele speciale</A>
</H2>

<P>
Pentru o vreme în arena reþelelor de comunicaþii s-a dus o luptã
acerbã între protocoalele folosite în Internet, bazate pe IP ºi
TCP, ºi o serie de protocoale standardizate de organizaþia mondialã
a telecomunicaþiilor.  Lupta a fost incertã pînã în urmã cu
doi-trei ani; pentru o vreme balanþa a înclinat în sprijinul
reþelelor de tip OSI (Open System Interconnection: denumirea
standardelor organizaþiei sus-menþionate); de curînd a devenit
însã evident cã Internetul este, cel puþin pentru urmãtorii ani,
tehnologia învingãtoare.

<P>
În afarã de TCP/IP ºi reþelele de tip OSI, existã o sumedenie de
alte feluri de reþele de calculatoare, în general dezvoltate de
marile companii de calculatoare, toate incompatibile între ele.  De
pildã IBM are propriul model, numit SNA, Digital (acum Compaq) are
DecNet, Apple are Appletalk, etc.  Din cauza asta, la ora actualã în
lume existã o bazã mare instalatã de reþele care funcþioneazã cu
protocoale diferite.

<P>
Dar aceste reþele nu sunt sortite sã rãmînã izolate; ele pot fi
folosite ca punþi de legãturã în Internet folosind conceptul de
tunel.  Figura&nbsp;<A HREF="tunel-html.html#x25">1</A> ilustreazã acest fenomen cu un caz real.

<P>

<P></P>
<DIV ALIGN="CENTER"><A NAME="x25"></A><A NAME="124"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 1:</STRONG>
Un tunel X25 între reþeaua universitãþii
Politehnica din Bucureºti ºi reþeaua Universitãþii din
Bucureºti.  Pachetele IP de la Poli sunt ``împachetate'' de cãtre
un ruter multiprotocol (care ºtie atît IP cît ºi X25) ca date în
pachetele X25, ºi sunt despachetate de ruterul de la Universitate ºi
transmise apoi în reþeaua localã.</CAPTION>
<TR><TD><IMG
 WIDTH="541" HEIGHT="244" BORDER="0"
 SRC="img1.png"
 ALT="\begin{figure}\centerline{\epsfxsize=12cm\epsffile{x25.eps}}\end{figure}"></TD></TR>
</TABLE>
</DIV><P></P>

<P>
Din motive tehnice, la începutul formãrii reþelei universitare
române, acum numitã RoEduNet, cîteva reþele erau conectate între
ele folosind un protocol de comunicaþii numit X25, care este un
protocol OSI.  Legãtura la Internetul mondial era oferitã de
Politehnica din Bucureºti (PUB: ``Politehnica'' University of
Bucharest, <TT>pub.ro</TT>; între Pub ºi alte cîteva universitãþi
era însã instalatã o reþea X25; la Pub se afla un switch X25 (un
switch este un ruter, în terminologia X25), la care se cuplau mai
multe linii telefonice închiriate, care veneau de la alte
universitãþi.  ªi la ora actualã, Universitatea din Bucureºti
(<TT>unibuc.ro</TT>) este cuplatã în acest fel.  Legãtura între
reþeaua IP (Internet) ºi cea X25 este fãcutã cu douã cutii care
sunt numite <EM>rutere multiprotocol</EM>.  Aceste cutii ºtiu sã
converseze protocoale diferite pe interfeþe diferite; ruterul de la
poli vorbea IP cu lumea exterioarã ºi X25 cu switch-ul.  Cele douã
rutere de la extremitãþile reþelei X25 deschideau între ele un
circuit X25, prin care apoi transmiteau de la unul la altul pachetele
IP; acestea deveneau date ordinare pentru protocolul X25.  Acesta nu
este altceva decît un tunel, care transportã IP prin X25.

<P>
Din punct de vedere al restului lumii, reþeaua X25 nici nu existã;
toate celelalte calculatoare au impresia cã ruterul de la Pub este
cuplat direct printr-o sîrmã cu ruterul de la UniBuc; toatã
reþeaua X25 este complet transparentã (invizibilã).

<P>
Acest fenomen se întîlneºte foarte des; de exemplu în Statele
Unite compania de telecomunicaþii Sprint, care posedã o mare parte
din coloana vertebralã a Internetului, foloseºte pentru asta
reþeaua proprie care ruleazã protocolul ATM; la capetele reþelei
ATM se aflã rutere multiprotocol IP/ATM, care formeazã tunele prin
reþeaua ATM pentru a transporta traficul Internet.

<P>

<H2><A NAME="SECTION00042000000000000000">
Reþele private virtuale</A>
</H2>

<P>
O altã aplicaþie interesantã a tunelelor este folositã de
corporaþiile multi-naþionale.  O firmã ca IBM are reþele pe tot
cuprinsul globului, aºa cã nu poate folosi o singurã sub-reþea
pentru a-ºi lega toate departamentele.  IBM însã poate crea ceea ce
se numeºte <EM>o reþea privatã virtualã</EM> (Virtual Private
Network, VPN), cum ilustrãm în figura&nbsp;<A HREF="tunel-html.html#privata">2</A>.

<P>

<P></P>
<DIV ALIGN="CENTER"><A NAME="privata"></A><A NAME="130"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2:</STRONG>
O reþea privatã virtualã.  Cele douã
sedii ale unei companii, pe douã continente diferite, sunt fiecare
separate de Internet cu cîte un firewall.  Cele douã reþele sunt
legate între ele printr-un tunel care trece tot prin Internet, ceea
ce permite calculatoarelor din aceste douã reþele sã comunice
între ele nestingherite.</CAPTION>
<TR><TD><IMG
 WIDTH="540" HEIGHT="193" BORDER="0"
 SRC="img2.png"
 ALT="\begin{figure}\centerline{\epsfxsize=12cm\epsffile{privata.eps}}\end{figure}"></TD></TR>
</TABLE>
</DIV><P></P>

<P>
IBM asigneazã adrese<A NAME="tex2html4"
  HREF="#foot81"><SUP>2</SUP></A> ºi construieºte toate
reþelele ca ºi cum ar fi legate direct între ele.  Sã presupunem
cã toate reþelele de la IBM folosesc IP.  Apoi, pentru fiecare
reþea, ruterele de la margine construiesc tunele.  Ruterul din
New-York deschide o legãturã la ruterul din Delhi, formînd un
tunel.  De aici înainte toate pachetele trimise de la New-York la
Delhi sunt împachetate în pachete IP ºi trimise prin tunel în
Delhi.  Ruterul din Delhi le despacheteazã, dupã care le pune în
reþeaua localã, ca ºi cum le-ar fi primit de la vecinul imediat.

<P>
Acesta este un fenomen foarte interesant, în care date ale unui
protocol sunt împachetate în pachete ale aceluiaºi protocol!  În
analogia noastrã anterioarã, e ca ºi cum am de trimis cinci vederi
din America în România, dar pentru a nu plãti cinci timbre, le pun
într-un plic pe toate, le trimit cu poºta unui amic din România, pe
care îl rog sã le punã la Poºta Românã, cu timbre mai ieftine.
Protocolul folosit în ambele cazuri e acelaºi, al sistemului
poºtal, dar cîteodatã transport scrisori în scrisori!

<P>
Un motiv pentru care corporaþiile folosesc aceastã metodã, în loc
de a lega direct cele douã reþele prin Internet, este <EM>securitatea</EM>.  Adesea companiile restrîng dramatic accesul la
informaþiile din interior, mai ales pentru a preveni pirateria
informaticã.  Accesul din exterior în reþeaua IBM se poate face
numai prin niºte puncte înguste (ca punctul de vamã de la
frontierã), numite ``pereþi de foc'' (<EM>firewall</EM>).  Un
administrator permite un acces extrem de limitat printr-un firewall,
de pildã doar poºtã electronicã, dar nu ºi web sau ftp.  Cu toate
cã accesul din exterior (sau chiar din interior spre înafarã) este
strict limitat, datoritã reþelei private virtuale, calculatoarele
din centrele IBM de pe cele douã continente pot comunica între ele
nestingherite, fãrã nici un fel de limitãri cauzate de firewalls.

<P>

<H2><A NAME="SECTION00043000000000000000">
MBONE: reþeaua de difuzare</A>
</H2>

<P>
O altã aplicaþie extrem de interesantã a conceptului de tunel a
fost construitã prin teza de doctorat a lui Steve Deering, la
Universitatea Stanford.  Este vorba de difuzare.

<P>
Reþeaua de televiziune funcþioneazã prin difuzare (<EM>broadcast</EM>): un post emite ºi toatã lumea recepteazã.  În cazul
calculatoarelor comunicaþia este <EM>punct-la-punct</EM>: unul vorbeºte
ºi unul singur ascultã.  Dar existã aplicaþii ale calculatoarelor
care ar beneficia de difuzare; de exemplu teleconferinþele între mai
mulþi participanþi.  În englezã se face distincþie între
difuzarea pe care o primeºte toatã lumea (broadcast) ºi difuzarea
pe care o primeºte doar o submulþime dintre posibilii ascultãtori,
de pildã doar cei interesaþi.  Ultima se numeºte <EM>multicast</EM>.

<P>
Implementarea difuzãrii în sine nu este o treabã deosebit de grea
(vom vedea mai jos cum este ea realizatã); problema cea mai
complicatã este cum poate fi implementatã difuzarea în Internet,
care este deja construit ºi nu a fost conceput pentru a suporta aºa
ceva.  Asta este o adevãratã problemã inginereascã, pe care Deering
a rezolvat-o cu mult succes.

<P>
Soluþia lui Deering cere cooperarea unora din ruterele din Internet,
pentru a fi eficace.  Pentru cã nimeni nu poate schimba toate ruterele
dintr-o reþea cu 100 de milioane de calculatoare, care se întinde pe
tot globul, soluþia trebuie sã funcþioneze chiar dacã numai cîteva
rutere sunt de acord sã colaboreze, iar toate celelalte nu ºtiu nimic
despre difuzare.  Vom numi ruterele care participã la mbone <EM>rutere
multicast</EM>.  Aceste rutere sunt relativ puþine, rãspîndite în
toatã lumea; sunt niºte dispozitive experimentale.  Totalitatea
ruterelor multicast se numeºte ``coloana vertebralã de difuzare'', sau
Multicast backBONE, <EM>Mbone</EM>.  Mbone este operaþionalã din 1988
(<a href="http://www.mbone.com">http://www.mbone.com</a>).  Harta
curentã a reþelei este disponibilã la <a
href="http://www.cs.berkeley.edu/~elan/mbone.html">http://www.cs.berkeley.edu/~elan/mbone.html</a>.

<P>
Aþi ghicit care este tehnologia folositã?  Cum se numeºte acest
articol?  Figura&nbsp;<A HREF="tunel-html.html#mbone">3</A> ilustreazã modul în care funcþioneazã
MBone.

<P>

<P></P>
<DIV ALIGN="CENTER"><A NAME="mbone"></A><A NAME="136"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 3:</STRONG>
Reþeaua virtualã de difuzare Multicast
BackBone.  Ruterele care înþeleg protocolul de rutare special
folosit în Mbone creazã între ele tunele prin care-ºi trimit
pachetele de difuzare.  Un ruter din reþeaua de difuzare multiplicã
un pachet destinat mai multor calculatoare pentru fiecare vecin.
Tunelurile (ilustrate cu linii groase) formeazã o reþea virtualã,
numitã Mbone.</CAPTION>
<TR><TD><IMG
 WIDTH="541" HEIGHT="349" BORDER="0"
 SRC="img3.png"
 ALT="\begin{figure}\centerline{\epsfxsize=12cm\epsffile{mbone.eps}}\end{figure}"></TD></TR>
</TABLE>
</DIV><P></P>

<P>
Ruterele multicast sunt configurate de administratori sã ºtie despre
alte rutere multicast.  Fiecare ruter multicast este configurat sã
comunice cu un anumit set de alte rutere multicast, ``vecinii'' sãi
(de care se poate afla la distanþã foarte mare, de altfel).  Un
ruter multicast construieºte cîte o legãturã virtualã cu fiecare
vecin, un tunel folosind protocolul IP.  De aici înainte ruterele
multicast transmit pachetele de difuzare numai prin aceste tunele.
Ele au impresia cã sunt direct conectate unul cu altul, ca ºi cum
restul Internetului nu ar mai exista!

<P>
Din cauza aceasta reþeaua MBone este o reþea <EM>virtualã</EM>.  Ca
ºi reþelele private virtuale, în MBone doi vecini aparenþi pot fi
de fapt la distanþe foarte mari, dar sunt legaþi de un tunel care le
dã iluzia de vecinãtate fizicã.

<P>
Deºi este extrem de interesant, nu voi mai intra în amãnunte prea
multe despre funcþionarea Mbone; voi ilustra doar principiile
generate, printr-un exemplu:

<P>

<OL>
<LI>Un anumit set de adrese din Internet, numite ``adrese de clasã
D'' sunt rezervate pentru difuzare.  Fiecare adresã de difuzare
reprezintã un grup de ascultãtori ai unei singure transmisiuni.

<P>
</LI>
<LI>Dacã un calculator vrea sã asculte o anumitã emisiune, tot ce
are de fãcut este sã-ºi atribuie o astfel de adresã ºi sã
anunþe ruterul cel mai apropiat din Mbone.

<P>
</LI>
<LI>Ruterele din Mbone îºi transmit unul altuia informaþii despre
unde se aflã calculatoare cu fiecare adresã.  În
figura&nbsp;<A HREF="tunel-html.html#mbone">3</A>, toate ruterele vor afla despre cele trei
calculatoare cu adresa Y.

<P>
</LI>
<LI>Sã presupunem cã calculatorul A vrea sã trimitã o
conferinþã video pentru adresa Y.  Atunci el trimite ruterului cel
mai apropiat (R1) din Mbone pachetele de transmis, folosind un tunel.

<P>
</LI>
<LI>Acest ruter ºtie care din vecinii lui au ascultãtori
interesaþi de emisiune.  În figura noastrã aceºtia vor fi R2 ºi
R3.  R1 ca atare face <EM>douã</EM> copii ale pachetului iniþial, ºi
trimite cîte una fiecãruia dintre vecini, prin tunelul stabilit.

<P>
</LI>
<LI>Fiecare ruter procedeazã mai departe, transmiþînd atîtea
copii cîte tuneluri are, spre rutere interesate de pachet.  Dacã unul
din vecinii unui ruter nu deserveºte nici un calculator cu adresa Y
(ca R4 din figurã), atunci acel ruter nici nu primeºte o copie.

<P>
</LI>
<LI>Procesul se repetã pînã pachetele ajung la toate
destinaþiile.
</LI>
</OL>

<P>
Metoda aceasta este deosebit de elegantã, pentru cã rezolvã
problema <EM>scalabilitãþii</EM>.  Observaþi cã efortul fiecãrui
participant pentru transmisiune este relativ mic pentru fiecare
pachet; în nici un caz nu depinde de numãrul de recipienþi (ci doar
de numãrul de vecini).

<P>
Prin contrast, sã ne imaginãm cum am fi rezolvat aceastã problemã
dacã nu aveam deloc rutere multicast la dispoziþie.  Ei bine, atunci
sursa trebuia sã ºtie care sunt toþi receptorii, ºi sã deschidã
cîte o legãturã pentru fiecare.  Apoi sursa trebuia sã transmitã
fiecare pachet de atîtea ori cîþi receptori avea.  Asta este clar o
risipã, pentru cã cele mai multe pachete (identice) vor traversa
aceleaºi legãturi în mod inutil.  Dacã sunt 10 000 de consumatori,
aceasta ar depãºi capacitãþile atît ale sursei, cît ºi probabil
ale legãturii sursei la reþea.

<P>

<H2><A NAME="SECTION00044000000000000000">
Mobile-IP: calculatoare mobile</A>
</H2>

<P>
În fine, vom ilustra o ultimã tehnologie spectaculoasã al
tunelelor, cu o altã aplicaþie care funcþioneazã în Internet ºi
este în curs de aprobare de cãtre corpul de standardizare al
Internetului, IETF (Internet Engineering Task Force).

<P>
Problema are de-a face cu calculatoarele care ``se plimbã'', care nu
au o poziþie fixã.  De pildã, dacã zburãm cu avionul cu un
laptop, acest calculator ar putea fi într-o zi în Europa, iar în
alta în Japonia.  Cum poate comunica acest calculator în Internet ca
ºi cum ar fi tot timpul legat la aceeaºi reþea?

<P>
Problema provine din modul în care adresele sunt atribuite ºi
rutarea pachetelor este fãcutã în Internet; am consacrat un întreg
articol în trecut acestui subiect, aºa încît nu o sã mã repet
aici.

<P>
Ideea este cã adresa unui calculator indicã aproximativ ºi locul
geografic în care acesta se aflã; astfel, dacã un calculator îºi
schimbã poziþia, pachetele care-i sunt destinate nu îl mai pot
gãsi.  (Un calculator nu-ºi poate schimba adresa, pentru cã asta
este identitatea lui, dupã care ceilalþi îl recunosc.)  Soluþia
existã, este implementatã, funcþioneazã, ºi este ilustratã în
figura&nbsp;<A HREF="tunel-html.html#mobile">4</A>.

<P>

<P></P>
<DIV ALIGN="CENTER"><A NAME="mobile"></A><A NAME="142"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 4:</STRONG>
Funcþionarea protocolului IP mobil: un
calculator migrator primeºte de la reþeaua în care a poposit o
adresã nouã; ruterul de la reþeaua lui de baºtinã ºi de la
reþeaua gazdã creazã un tunel prin care îi trimit pachetele care i
se cuveneau.</CAPTION>
<TR><TD><IMG
 WIDTH="543" HEIGHT="243" BORDER="0"
 SRC="img4.png"
 ALT="\begin{figure}\centerline{\epsfxsize=12cm\epsffile{mobile.eps}}\end{figure}"></TD></TR>
</TABLE>
</DIV><P></P>

<P>
Pentru a realiza comunicarea în mod transparent cu un calculator
mobil, ne trebuie colaborarea a douã rutere: unul în reþeaua unde
calculatorul se aflã de obicei (reþeaua-casã) ºi unul în reþeaua
unde calculatorul se plimbã (reþeaua-gazdã).  Iatã cum
funcþioneazã protocolul, în linii mari:

<P>

<OL>
<LI>Calculatorul coboarã din avion în Japonia.  El emite un pachet
radio, zicînd ``cucu, am venit în vizitã din Europa; e cineva
acasã?'';

<P>
</LI>
<LI>Un ruter gazdã aude acest pachet.  Prin anumite metode
criptografice, acest ruter se convinge cã, într-adevãr, acest
calculator nu este un impostor, ci chiar calculatorul european în
vizitã;

<P>
</LI>
<LI>Ruterul-gazdã ia legãtura cu ruterul-casã: ``hai salut; un
laptop de-al tãu e pe la mine prin zonã; mã ocup eu de el''; prin
anumite metode criptografice ruterul casã se convinge într-adevãr
cã nu vorbeºte nici el cu un impostor;

<P>
</LI>
<LI>Ruterul gazdã îi rãspunde calculatorului mobil: ``s-a
aranjat: de acum înainte poþi folosi adresa asta din Japonia, ca sã
primeºti corespondenþa'';

<P>
</LI>
<LI>Ruterul-gazdã ºi ruterul-casã construiesc un tunel între
ele;

<P>
</LI>
<LI>De fiecare datã cînd ruterul-casã vede un pachet pentru
laptop-ul plecat, în loc sã-l trimitã în reþeaua localã, unde
laptop-ul se afla iniþial, îl bagã în tunel, pentru ruterul
Japonez;

<P>
</LI>
<LI>Ruterul japonez extrage din tunel pachetele pentru vizitator ºi
i le înmîneazã la noua adresã.
</LI>
</OL>

<P>
Din nou, analogia cu sistemul poºtal este perfectã; este ca ºi cum
vecinul de bloc are cheia dvs. de la cutia poºtalã, ia toate
scrisorile pe care le primiþi, le bagã într-un plic cu timbru de
Japonia ºi le pune din nou la poºtã.

<P>
Foarte elegant, nu?

<P>

<H1><A NAME="SECTION00050000000000000000">
Concluzii</A>
</H1>

<P>
Am vãzut în acest text cum un mecanism extrem de simplu IP, care
transferã în mod ne-fiabil date între douã calculatoare, poate fi
extins în felurite moduri, pentru a construi mecanisme din ce în ce
mai sofisticate.  Am vãzut cum TCP oferã fiabilitate, tunelele
oferã legãturi virtuale între calculatoare distante, Mbone oferã
difuzare cu cost redus, iar protocolul Mobile-IP oferã independenþã
de poziþie.

<P>
Sper ca de acum înainte sã nu mai treceþi printr-un tunel fãrã o
umbrã de admiraþie.

<P>
<BR><HR><H4>Footnotes</H4>
<DL>
<DT><A NAME="foot52">... AT&T</A><A NAME="foot52"
 HREF="tunel-html.html#tex2html1"><SUP>1</SUP></A>
<DD>AT&amp;T a fost timp de 60 de ani cea mai mare companie
de telecomunicaþii din lume, avînd, pînã în 1984, un monopol
practic complet asupra telefoniei în Statele Unite; în 1984 AT&amp;T a
fost sfãrîmatã de guvernul american în mai multe companii care se
concureazã una pe alta.  AT&amp;T derivã direct din compania fondatã
de Alexander Graham Bell, inventatorul telefonului.

<DT><A NAME="foot81">... adrese</A><A NAME="foot81"
 HREF="tunel-html.html#tex2html4"><SUP>2</SUP></A>
<DD>Acest exemplu este pedagogic (dar
plauzibil); nu ºtiu dacã într-adevãr IBM foloseºte aceastã
schemã la nivelul întregii corporaþii.

</DL>
<BR><HR>

</BODY>
</HTML>
